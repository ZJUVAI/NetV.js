!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var s=e();for(var i in s)("object"==typeof exports?exports:t)[i]=s[i]}}(window,(function(){return function(t){var e={};function s(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(i,o,function(e){return t[e]}.bind(null,o));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";s.r(e),s.d(e,"BoxSelection",(function(){return i}));class i{constructor(t,e){this.$_svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.$_core=t,t.$_container.prepend(this.$_svg),this.$_svg.setAttribute("id","box-selection"),this.$_svg.setAttribute("width",t.$_configs.width),this.$_svg.setAttribute("height",t.$_configs.height),t.$_container.style.position="relative",t.$_container.style.overflow="hidden",t.$_container.style.width=t.$_configs.width,t.$_container.style.height=t.$_configs.height,this.$_svg.style.position="absolute",this.$_svg.style.zIndex="20",this.$_svg.style.overflow="visible",this.$_svg.style.pointerEvents="none",this._width=t.$_configs.width,this._height=t.$_configs.height,this._rectStyle={fill:"rgba(200, 200, 200, 0.2)",stroke:"black","stroke-width":1,"stroke-dasharray":[],...e.boxStyle},this._initPos={x:0,y:0},this._rectParams={x:0,y:0,w:0,h:0},this._selectedItems=[],this._selectedCallback=null,this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),window.addEventListener("mousedown",this._onMouseDown),window.addEventListener("mousemove",this._onMouseMove),window.addEventListener("mouseup",this._onMouseUp),e&&!0===e.enable&&this.enable()}dispose(){this.$_svg.remove(),window.removeEventListener("mousedown",this._onMouseDown),window.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("mouseup",this._onMouseUp)}enable(){this.$_svg.style.pointerEvents="visible"}disable(){this.$_svg.style.pointerEvents="none"}onSelected(t){this._selectedCallback=t}_onMouseDown(t){if(0!==t.button)return;this._selecting=!0,this._rect=document.createElementNS("http://www.w3.org/2000/svg","rect"),this._rect.setAttribute("fill",this._rectStyle.fill),this._rect.setAttribute("stroke",this._rectStyle.stroke),this._rect.setAttribute("stroke-width",this._rectStyle["stroke-width"]),this._rect.setAttribute("stroke-dasharray",this._rectStyle["stroke-dasharray"]),this.$_svg.appendChild(this._rect);const e=t.offsetX,s=t.offsetY;this._initPos={x:e,y:s},this._rectParams.w=0,this._rectParams.h=0}_onMouseMove(t){if(0!==t.button)return;if(!this._selecting)return;const e=t.offsetX,s=t.offsetY;this._rectParams.w=Math.abs(this._initPos.x-e),this._rectParams.h=Math.abs(this._initPos.y-s),this._rectParams.x=Math.min(e,this._initPos.x),this._rectParams.y=Math.min(s,this._initPos.y),this._rect.setAttribute("x",this._rectParams.x),this._rect.setAttribute("y",this._rectParams.y),this._rect.setAttribute("width",this._rectParams.w),this._rect.setAttribute("height",this._rectParams.h)}_onMouseUp(t){0===t.button&&(this._rect.remove(),this._getSelectedItems(),this._selectedCallback&&this._selectedCallback(this._selectedItems))}_getSelectedItems(){const t=this.$_core.nodes(),e=this.$_core.transform();this._selectedItems=t.filter(t=>{const s=t.x()*e.k+e.x,i=t.y()*e.k+e.y;return s>this._rectParams.x&&s<this._rectParams.x+this._rectParams.w&&i>this._rectParams.y&&i<this._rectParams.y+this._rectParams.h})}}}])}));
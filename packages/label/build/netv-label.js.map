{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./netv-label.js"],"names":["Label","constructor","netv","$_core","$_svg","document","createElementNS","$_container","prepend","setAttribute","$_configs","width","height","style","position","overflow","zIndex","pointerEvents","_drawNode","node","transform","drawFunc","pos","x","k","y","content","gElement","getLabel","_removeContent","append","id","_updateNodePosition","element","firstChild","removeChild","dispose","remove","getElementById","draw","rightText","Array","isArray","forEach","n","updatePosition","topText","text","fontSize","fill","strokeWidth","offset","textElement","userSelect","innerHTML","template"],"mappings":"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","file":"netv-label.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/**\r\n * @author Xiaodong Zhao <zhaoxiaodong@zju.edu.cn>\r\n * @description netv's label\r\n */\r\n\r\nexport class Label {\r\n    constructor(netv) {\r\n        this.$_core = netv\r\n\r\n        this.$_svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\r\n        this.$_core.$_container.prepend(this.$_svg)\r\n        this.$_svg.setAttribute('width', this.$_core.$_configs.width)\r\n        this.$_svg.setAttribute('height', this.$_core.$_configs.height)\r\n        this.$_core.$_container.style.position = 'relative'\r\n        this.$_core.$_container.style.overflow = 'hidden'\r\n        this.$_core.$_container.style.width = this.$_core.$_configs.width\r\n        this.$_core.$_container.style.height = this.$_core.$_configs.height\r\n        this.$_svg.style.position = 'absolute'\r\n        this.$_svg.style.zIndex = '10'\r\n        this.$_svg.style.pointerEvents = 'none'\r\n    }\r\n\r\n    _drawNode(node, transform, drawFunc) {\r\n        const pos = node.position()\r\n        const x = pos.x * transform.k + transform.x\r\n        const y = pos.y * transform.k + transform.y\r\n\r\n        const content = drawFunc(node)\r\n\r\n        let gElement = this.getLabel(node)\r\n        if (gElement) {\r\n            this._removeContent(gElement)\r\n            gElement.setAttribute('transform', `translate(${x} ${y})`)\r\n            gElement.append(content)\r\n        } else {\r\n            gElement = document.createElementNS('http://www.w3.org/2000/svg', 'g')\r\n            gElement.setAttribute('id', `${node.id()}`)\r\n            gElement.setAttribute('transform', `translate(${x} ${y})`)\r\n            gElement.append(content)\r\n\r\n            this.$_svg.prepend(gElement) // NOTE: make last added text at top\r\n        }\r\n    }\r\n\r\n    _updateNodePosition(node, transform) {\r\n        const pos = node.position()\r\n        const x = pos.x * transform.k + transform.x\r\n        const y = pos.y * transform.k + transform.y\r\n\r\n        const gElement = this.getLabel(node)\r\n        if (gElement) gElement.setAttribute('transform', `translate(${x} ${y})`)\r\n    }\r\n\r\n    _removeContent(element) {\r\n        while (element.firstChild) element.removeChild(element.firstChild)\r\n    }\r\n\r\n    dispose() {\r\n        this.$_svg.remove()\r\n    }\r\n\r\n    getLabel(node) {\r\n        return this.$_svg.getElementById(node.id())\r\n    }\r\n\r\n    draw(node, drawFunc = (node) => rightText(node.id())) {\r\n        const transform = this.$_core.transform()\r\n        if (Array.isArray(node)) {\r\n            // draw multiple nodes\r\n            node.forEach((n) => this._drawNode(n, transform, drawFunc))\r\n        } else {\r\n            // draw single node\r\n            this._drawNode(node, transform, drawFunc)\r\n        }\r\n    }\r\n\r\n    updatePosition(node) {\r\n        const transform = this.$_core.transform()\r\n        if (Array.isArray(node)) {\r\n            // draw multiple nodes\r\n            node.forEach((n) => this._updateNodePosition(n, transform))\r\n        } else {\r\n            // draw single node\r\n            this._updateNodePosition(node, transform)\r\n        }\r\n    }\r\n\r\n    remove(node) {\r\n        if (Array.isArray(node)) {\r\n            // remove multiple nodes\r\n            node.forEach((n) => {\r\n                this.getLabel(n)?.remove()\r\n            })\r\n        } else {\r\n            // remove single node\r\n            this.getLabel(node)?.remove()\r\n        }\r\n    }\r\n}\r\n\r\n// eslint-disable-next-line max-params\r\nconst topText = (text, fontSize = 18, fill = 'black', strokeWidth = 0.5, offset = -8) => {\r\n    const textElement = document.createElementNS('http://www.w3.org/2000/svg', 'text')\r\n\r\n    textElement.setAttribute('font-size', `${fontSize}px`)\r\n    textElement.setAttribute('fill', `${fill}`)\r\n    textElement.setAttribute('stroke', `white`)\r\n    textElement.setAttribute('stroke-width', `${strokeWidth}px`)\r\n    textElement.setAttribute('transform', `translate(0 ${offset})`)\r\n    textElement.setAttribute('text-anchor', 'middle')\r\n    textElement.setAttribute('alignment-baseline', 'bottom')\r\n    textElement.style.userSelect = 'none' // NOTE: prevent unexpected selection when dragging node(delete and recreate textElement)\r\n    textElement.innerHTML = text\r\n\r\n    return textElement\r\n}\r\n\r\n// eslint-disable-next-line max-params\r\nconst rightText = (text, fontSize = 18, fill = 'black', strokeWidth = 0.5, offset = 8) => {\r\n    const textElement = document.createElementNS('http://www.w3.org/2000/svg', 'text')\r\n\r\n    textElement.setAttribute('font-size', `${fontSize}px`)\r\n    textElement.setAttribute('fill', `${fill}`)\r\n    textElement.setAttribute('stroke', `white`)\r\n    textElement.setAttribute('stroke-width', `${strokeWidth}px`)\r\n    textElement.setAttribute('transform', `translate(${offset} 0)`)\r\n    textElement.setAttribute('text-anchor', 'start')\r\n    textElement.setAttribute('alignment-baseline', 'middle')\r\n    textElement.style.userSelect = 'none' // NOTE: prevent unexpected selection when dragging node(delete and recreate textElement)\r\n    textElement.innerHTML = text\r\n\r\n    return textElement\r\n}\r\n\r\nLabel.template = {\r\n    rightText,\r\n    topText\r\n}\r\n"],"sourceRoot":""}